# ğŸ³ SmartChef Agent

<div align="center">

![Python](https://img.shields.io/badge/Python-3.9+-blue.svg)
![LangChain](https://img.shields.io/badge/LangChain-0.1.0-green.svg)
![Streamlit](https://img.shields.io/badge/Streamlit-1.29.0-red.svg)
![License](https://img.shields.io/badge/License-MIT-yellow.svg)

**åŸºäº LLM çš„æ™ºèƒ½å¨å¸ˆåŠ©æ‰‹ - æ‹ç…§è¯†åˆ«é£Ÿæï¼Œè‡ªåŠ¨æ¨èèœè°±**

[åŠŸèƒ½ç‰¹ç‚¹](#-åŠŸèƒ½ç‰¹ç‚¹) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [ç³»ç»Ÿæ¶æ„](#-ç³»ç»Ÿæ¶æ„) â€¢ [æ¼”ç¤º](#-æ¼”ç¤ºæ•ˆæœ) â€¢ [API é…ç½®](#-api-é…ç½®)

</div>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

SmartChef Agent æ˜¯ä¸€ä¸ªåŸºäº **LangChain + LangGraph** æ„å»ºçš„æ™ºèƒ½çƒ¹é¥ªåŠ©æ‰‹ï¼Œé€šè¿‡ LLM è‡ªä¸»å†³ç­–è°ƒç”¨å·¥å…·ï¼Œä¸ºç”¨æˆ·æä¾›ï¼š

- ğŸ–¼ï¸ **AI å›¾åƒè¯†åˆ«**ï¼šæ‹æ‘„å†°ç®±é£Ÿæï¼Œè‡ªåŠ¨è¯†åˆ«æˆåˆ†
- ğŸ” **æ™ºèƒ½èœè°±æœç´¢**ï¼šæ ¹æ®ç°æœ‰é£ŸæåŒ¹é…æœ€ä½³èœè°±
- ğŸ“Š **è¥å…»æˆåˆ†åˆ†æ**ï¼šæä¾›è¯¦ç»†çš„å¡è·¯é‡Œã€è›‹ç™½è´¨ç­‰è¥å…»æ•°æ®
- ğŸ¤– **è‡ªä¸»å·¥ä½œæµç¼–æ’**ï¼šAgent è‡ªåŠ¨è§„åˆ’ä»»åŠ¡æµç¨‹ï¼Œæ— éœ€äººå·¥å¹²é¢„

---

## âœ¨ åŠŸèƒ½ç‰¹ç‚¹

### ğŸ§  æ ¸å¿ƒèƒ½åŠ›

| åŠŸèƒ½ | è¯´æ˜ | æŠ€æœ¯æ ˆ |
|------|------|--------|
| **å¤šæ¨¡æ€è¾“å…¥** | æ”¯æŒæ–‡æœ¬æè¿° + å›¾ç‰‡ä¸Šä¼  | Qwen-VL-Max |
| **æ™ºèƒ½å†³ç­–** | LLM è‡ªä¸»é€‰æ‹©å·¥å…·è°ƒç”¨é¡ºåº | LangGraph + Qwen-Plus |
| **å¹¶è¡Œè°ƒç”¨** | åŒæ—¶è·å–å¤šä¸ªèœè°±è¯¦æƒ…ï¼Œæå‡æ•ˆç‡ | LangChain ToolNode |
| **å®Œæ•´æ—¥å¿—** | å±•ç¤º Thought â†’ Action â†’ Observation é“¾è·¯ | Streamlit |

### ğŸ› ï¸ å·¥å…·é›† (Tools)

```
ğŸ“¦ SmartChef Tools
 â”œâ”€ ğŸ–¼ï¸ image_recognition_tool
 â”‚   â””â”€ ä½¿ç”¨ Qwen-VL-Max è¯†åˆ«é£Ÿæ
 â”œâ”€ ğŸ” recipe_search_tool
 â”‚   â””â”€ è°ƒç”¨ Spoonacular API æœç´¢èœè°±
 â””â”€ ğŸ“– recipe_detail_tool
     â””â”€ è·å–èœè°±è¯¦ç»†æ­¥éª¤å’Œè¥å…»ä¿¡æ¯
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ ç¯å¢ƒè¦æ±‚

- Python 3.9+
- ç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼ˆéœ€è°ƒç”¨å¤šä¸ª APIï¼‰

### 2ï¸âƒ£ å®‰è£…ä¾èµ–

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/your-username/smartchef-agent.git
cd smartchef-agent

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 3ï¸âƒ£ é…ç½® API å¯†é’¥

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
# é˜¿é‡Œäº‘ DashScopeï¼ˆå¿…éœ€ï¼‰
DASHSCOPE_API_KEY=sk-your-dashscope-key

# Spoonacular é£Ÿè°± APIï¼ˆå¿…éœ€ï¼‰
SPOONACULAR_API_KEY=your-spoonacular-key

# USDA è¥å…»æ•°æ®åº“ï¼ˆå¯é€‰ï¼Œæœªä½¿ç”¨ï¼‰
USDA_API_KEY=your-usda-key
```

> ğŸ’¡ **è·å– API å¯†é’¥**ï¼š
> - DashScope: https://dashscope.console.aliyun.com/
> - Spoonacular: https://spoonacular.com/food-api

### 4ï¸âƒ£ è¿è¡Œåº”ç”¨

```bash
streamlit run main.py
```

è®¿é—® `http://localhost:8501` å³å¯ä½¿ç”¨ï¼

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  User Interface                  â”‚
â”‚              (Streamlit Web App)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LangGraph Workflow                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  START   â”‚â”€â”€â”€â”€â”€â–¶â”‚  Agent   â”‚â”€â”€â”€â”€â”€â–¶â”‚  END   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚                        â”‚
â”‚                         â–¼                        â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚                   â”‚  Tools   â”‚                   â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Image  â”‚      â”‚ Recipe â”‚      â”‚ Recipe â”‚
    â”‚  Recog â”‚      â”‚ Search â”‚      â”‚ Detail â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚               â”‚               â”‚
         â–¼               â–¼               â–¼
    Qwen-VL-Max   Spoonacular API   Spoonacular API
```

### ğŸ”„ å·¥ä½œæµç¨‹

1. **ç”¨æˆ·è¾“å…¥** â†’ æ–‡æœ¬æè¿° æˆ– ä¸Šä¼ é£Ÿæå›¾ç‰‡
2. **Agent å†³ç­–** â†’ LLM åˆ†æéœ€æ±‚ï¼Œè§„åˆ’å·¥å…·è°ƒç”¨
3. **å·¥å…·æ‰§è¡Œ** â†’ 
   - å¦‚æœ‰å›¾ç‰‡ â†’ è°ƒç”¨ `image_recognition_tool`
   - æœç´¢èœè°± â†’ è°ƒç”¨ `recipe_search_tool`
   - å¹¶è¡Œè·å–è¯¦æƒ… â†’ åŒæ—¶è°ƒç”¨ 3 æ¬¡ `recipe_detail_tool`
4. **ç»“æœæ•´åˆ** â†’ LLM ç”Ÿæˆç”¨æˆ·å‹å¥½çš„æ¨èæŠ¥å‘Š

---

## ğŸ¬ æ¼”ç¤ºæ•ˆæœ

### æ–‡æœ¬è¾“å…¥ç¤ºä¾‹

```
ç”¨æˆ·è¾“å…¥ï¼šæˆ‘æœ‰é¸¡è‚‰ã€åœŸè±†å’Œæ©™æ±ï¼Œæ¨èèœè°±

Agent æ‰§è¡Œæµç¨‹ï¼š
æ­¥éª¤ 1 â†’ è°ƒç”¨ recipe_search_tool("chicken, potato, orange juice")
æ­¥éª¤ 2 â†’ è¿”å› 3 ä¸ªåŒ¹é…èœè°± [ID: 648626, 660220, 641110]
æ­¥éª¤ 3 â†’ å¹¶è¡Œè°ƒç”¨ recipe_detail_tool(648626)
         å¹¶è¡Œè°ƒç”¨ recipe_detail_tool(660220)
         å¹¶è¡Œè°ƒç”¨ recipe_detail_tool(641110)
æ­¥éª¤ 4 â†’ æ•´åˆç»“æœï¼Œç”Ÿæˆæ¨èæŠ¥å‘Š

è¾“å‡ºï¼š
âœ… 1. Juiced-Up Chicken
   - åŒ¹é…åº¦: 3/3 é£Ÿæ
   - æ­¥éª¤: [è¯¦ç»†çƒ¹é¥ªæ­¥éª¤]
   - è¥å…»: çƒ­é‡ 4192 kcal | è›‹ç™½è´¨ 172g

âœ… 2. Skillet Roasted Chicken & Potatoes
   - åŒ¹é…åº¦: 2/4 é£Ÿæ
   - æ­¥éª¤: [è¯¦ç»†çƒ¹é¥ªæ­¥éª¤]
   - è¥å…»: çƒ­é‡ 738 kcal | è›‹ç™½è´¨ 45g

âœ… 3. Curry and Sage Roast Chicken
   - åŒ¹é…åº¦: 2/8 é£Ÿæ
   - æ­¥éª¤: [è¯¦ç»†çƒ¹é¥ªæ­¥éª¤]
   - è¥å…»: çƒ­é‡ 565 kcal | è›‹ç™½è´¨ 36g
```

### å›¾ç‰‡è¾“å…¥ç¤ºä¾‹

ä¸Šä¼ å†°ç®±é£Ÿæç…§ç‰‡ â†’ Agent è‡ªåŠ¨è¯†åˆ« â†’ æ¨èé€‚åˆèœè°±

---

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
smartchef-agent/
â”œâ”€â”€ main.py                          # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ .env                             # API å¯†é’¥é…ç½®ï¼ˆéœ€è‡ªè¡Œåˆ›å»ºï¼‰
â”œâ”€â”€ requirements.txt                 # Python ä¾èµ–
â”œâ”€â”€ README.md                        # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ tools/                           # å·¥å…·æ¨¡å—
    â”œâ”€â”€ __init__.py                  # åŒ…åˆå§‹åŒ–
    â”œâ”€â”€ image_ingredient_detector.py # å›¾åƒè¯†åˆ«å·¥å…·
    â”œâ”€â”€ spoonacular_tool.py          # èœè°±æœç´¢å·¥å…·
    â””â”€â”€ nutrition_api.py             # è¥å…»åˆ†æå·¥å…·ï¼ˆå¤‡ç”¨ï¼‰
```

---

## ğŸ”§ API é…ç½®

### DashScopeï¼ˆé˜¿é‡Œäº‘ï¼‰

ç”¨äºï¼š
- LLM æ¨ç†ï¼ˆQwen-Plusï¼‰
- å›¾åƒè¯†åˆ«ï¼ˆQwen-VL-Maxï¼‰

**è·å–æ­¥éª¤**ï¼š
1. è®¿é—® https://dashscope.console.aliyun.com/
2. æ³¨å†Œè´¦å·å¹¶å®Œæˆå®åè®¤è¯
3. åˆ›å»º API Key
4. å¤åˆ¶åˆ° `.env` æ–‡ä»¶

**è´¹ç”¨è¯´æ˜**ï¼š
- æ–°ç”¨æˆ·æœ‰å…è´¹é¢åº¦
- Qwen-Plus: Â¥0.004/åƒ tokens
- Qwen-VL-Max: Â¥0.02/åƒ tokens

### Spoonacular

ç”¨äºï¼š
- é£Ÿè°±æœç´¢
- è¥å…»æ•°æ®è·å–

**è·å–æ­¥éª¤**ï¼š
1. è®¿é—® https://spoonacular.com/food-api
2. æ³¨å†Œè´¦å·
3. åœ¨ Dashboard è·å– API Key

**è´¹ç”¨è¯´æ˜**ï¼š
- å…è´¹è´¦å·ï¼š150 è¯·æ±‚/å¤©
- ä»˜è´¹è®¡åˆ’ï¼š$19/æœˆèµ·

---

## ğŸ¯ æŠ€æœ¯äº®ç‚¹

### 1. **LangGraph å·¥ä½œæµç¼–æ’**

```python
workflow = StateGraph(AgentState)
workflow.add_node("agent", agent_node)
workflow.add_node("tools", ToolNode(tools))
workflow.add_conditional_edges("agent", should_continue)
```

- åŸºäºçŠ¶æ€æœºçš„å·¥ä½œæµè®¾è®¡
- æ”¯æŒæ¡ä»¶åˆ†æ”¯å’Œå¾ªç¯
- Agent å¯è‡ªä¸»å†³ç­–ä½•æ—¶ç»“æŸ

### 2. **å¹¶è¡Œå·¥å…·è°ƒç”¨**

```python
# LLM å¯ä»¥åœ¨ä¸€æ¬¡å†³ç­–ä¸­åŒæ—¶è°ƒç”¨å¤šä¸ªå·¥å…·
response.tool_calls = [
    {"name": "recipe_detail_tool", "args": {"recipe_id": 648626}},
    {"name": "recipe_detail_tool", "args": {"recipe_id": 660220}},
    {"name": "recipe_detail_tool", "args": {"recipe_id": 641110}}
]
```

- æå‡æ‰§è¡Œæ•ˆç‡
- å‡å°‘äº¤äº’è½®æ¬¡

### 3. **å®Œæ•´çš„å¯è§‚æµ‹æ€§**

- æ¯ä¸ªæ­¥éª¤éƒ½æœ‰æ¸…æ™°çš„æ—¥å¿—
- å±•ç¤ºå·¥å…·è°ƒç”¨å‚æ•°å’Œè¿”å›ç»“æœ
- ä¾¿äºè°ƒè¯•å’Œä¼˜åŒ–

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: `ModuleNotFoundError: No module named 'tools'`

**è§£å†³æ–¹æ¡ˆ**ï¼šç¡®ä¿ `tools/__init__.py` æ–‡ä»¶å­˜åœ¨

```bash
# åˆ›å»ºæ–‡ä»¶
touch tools/__init__.py
```

### Q2: API è°ƒç”¨å¤±è´¥

**æ’æŸ¥æ­¥éª¤**ï¼š
1. æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”é…ç½®æ­£ç¡®
2. ç¡®è®¤ API Key æœ‰æ•ˆä¸”æœ‰ä½™é¢
3. æ£€æŸ¥ç½‘ç»œè¿æ¥

### Q3: Agent åªè·å– 1 ä¸ªèœè°±è¯¦æƒ…å°±åœæ­¢

**åŸå› **ï¼šLLM æ¨ç†èƒ½åŠ›ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**ï¼š
- ä¼˜åŒ–ç³»ç»Ÿæç¤ºè¯ï¼ˆå·²åœ¨ä»£ç ä¸­å®ç°ï¼‰
- æˆ–ä½¿ç”¨å¼ºåˆ¶å¾ªç¯é€»è¾‘

---

## ğŸš§ æœªæ¥ä¼˜åŒ–æ–¹å‘

- [ ] æ”¯æŒæ›´å¤šè¯­è¨€çš„é£Ÿæè¯†åˆ«
- [ ] æ·»åŠ ç”¨æˆ·åå¥½è®°å¿†ï¼ˆå¦‚å£å‘³ã€è¿‡æ•æºï¼‰
- [ ] é›†æˆè´­ç‰©æ¸…å•ç”ŸæˆåŠŸèƒ½
- [ ] æ”¯æŒè¯­éŸ³äº¤äº’
- [ ] æ·»åŠ èœè°±è¯„åˆ†å’Œæ”¶è—åŠŸèƒ½
- [ ] éƒ¨ç½²åˆ°äº‘ç«¯ï¼ˆDocker + Kubernetesï¼‰

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

---

## ğŸ™ è‡´è°¢

- [LangChain](https://github.com/langchain-ai/langchain) - LLM åº”ç”¨å¼€å‘æ¡†æ¶
- [Streamlit](https://streamlit.io/) - å¿«é€Ÿæ„å»º Web åº”ç”¨
- [Spoonacular](https://spoonacular.com/) - é£Ÿè°±æ•°æ® API
- [é˜¿é‡Œäº‘ DashScope](https://dashscope.aliyun.com/) - å¤§æ¨¡å‹æœåŠ¡

---

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿ï¼š
- æäº¤ [Issue](https://github.com/your-username/smartchef-agent/issues)
- å‘é€é‚®ä»¶è‡³ï¼šyour-email@example.com

---

<div align="center">

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª Starï¼â­**

Made with â¤ï¸ by [Your Name]

</div>